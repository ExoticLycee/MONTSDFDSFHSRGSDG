<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WarpahExploits ‚Äî Anti-Cheat Dashboard</title>
<link rel="icon" href="https://res.cloudinary.com/dsjctfzj1/image/upload/v1760351559/IMG-20251007-WA0626_dv8s8r.jpg">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=JetBrains+Mono:wght@400;700&family=DM+Sans:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
:root {
  --g: #00ff88;
  --g2: #00cc66;
  --r: #ff3c3c;
  --y: #ffcc00;
  --bg: #050a06;
  --card: rgba(0,255,136,.04);
  --border: rgba(0,255,136,.15);
  --font-head: 'Orbitron', monospace;
  --font-mono: 'JetBrains Mono', monospace;
  --font-body: 'DM Sans', sans-serif;
}
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:var(--font-body); background:var(--bg); color:#e8f5ee; min-height:100vh; overflow-x:hidden; }

/* BG EFFECTS */
body::before {
  content:''; position:fixed; inset:0; z-index:0;
  background: radial-gradient(ellipse 80% 60% at 50% -20%, rgba(0,255,136,.07) 0%, transparent 70%),
              radial-gradient(ellipse 40% 40% at 90% 80%, rgba(0,200,100,.04) 0%, transparent 60%);
  pointer-events:none;
}
.grid-overlay {
  position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden;
  background-image: linear-gradient(rgba(0,255,136,.025) 1px, transparent 1px),
                    linear-gradient(90deg, rgba(0,255,136,.025) 1px, transparent 1px);
  background-size: 40px 40px;
  animation: gridDrift 30s linear infinite;
}
@keyframes gridDrift { 0%{transform:translateY(0)} 100%{transform:translateY(40px)} }
.scanline {
  position:fixed; top:0; left:0; width:100%; height:3px; z-index:9999; pointer-events:none;
  background: linear-gradient(90deg, transparent, var(--g), transparent);
  animation: scan 5s linear infinite; opacity:.3;
}
@keyframes scan { 0%{top:0} 100%{top:100vh} }

/* LOGIN SCREEN */
#loginScreen {
  position:fixed; inset:0; z-index:1000;
  display:flex; align-items:center; justify-content:center;
  background: radial-gradient(ellipse at center, #0a1a0e 0%, #050a06 100%);
}
.login-box {
  width:100%; max-width:420px; padding:48px 40px;
  background: rgba(0,255,136,.04);
  border: 1px solid rgba(0,255,136,.2);
  border-radius:24px;
  box-shadow: 0 0 80px rgba(0,255,136,.06), inset 0 1px 0 rgba(0,255,136,.1);
  text-align:center;
  animation: boxIn .5s ease;
}
@keyframes boxIn { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
.login-logo {
  width:64px; height:64px; border-radius:16px; object-fit:cover;
  margin:0 auto 20px; display:block;
  box-shadow: 0 0 30px rgba(0,255,136,.3);
}
.login-title { font-family:var(--font-head); font-size:22px; color:var(--g); letter-spacing:2px; margin-bottom:4px;
  text-shadow: 0 0 20px rgba(0,255,136,.5); }
.login-sub { font-size:12px; color:rgba(0,255,136,.5); margin-bottom:36px; letter-spacing:1px; }
.login-label { display:block; text-align:left; font-size:11px; font-weight:700; color:rgba(0,255,136,.6);
  letter-spacing:1.5px; margin-bottom:8px; }
.login-input {
  width:100%; padding:14px 18px;
  background: rgba(0,255,136,.05); border: 1px solid rgba(0,255,136,.2);
  border-radius:12px; color:#fff; font-family:var(--font-mono); font-size:15px;
  letter-spacing:3px; outline:none; transition: all .3s;
}
.login-input:focus { border-color:var(--g); box-shadow:0 0 20px rgba(0,255,136,.15); background:rgba(0,255,136,.08); }
.login-input::placeholder { letter-spacing:1px; color:rgba(255,255,255,.2); }
.login-pw-wrap { position:relative; margin-bottom:8px; }
.pw-eye { position:absolute; right:14px; top:50%; transform:translateY(-50%); cursor:pointer;
  color:rgba(0,255,136,.4); transition:color .2s; background:none; border:none; }
.pw-eye:hover { color:var(--g); }
.pw-dots { display:flex; gap:5px; justify-content:center; margin-bottom:24px; height:10px; }
.pw-dot { width:8px; height:8px; border-radius:50%; background:rgba(0,255,136,.15); border:1px solid rgba(0,255,136,.3); transition:all .2s; }
.pw-dot.on { background:var(--g); box-shadow:0 0 8px var(--g); }
.login-err { font-size:12px; color:var(--r); margin-bottom:16px; min-height:18px; transition:opacity .3s; }
.login-btn {
  width:100%; padding:15px; border:none; border-radius:12px; cursor:pointer;
  background:linear-gradient(135deg,var(--g),var(--g2));
  color:#050a06; font-family:var(--font-head); font-size:13px; font-weight:700; letter-spacing:2px;
  box-shadow:0 0 25px rgba(0,255,136,.4); transition:all .3s;
}
.login-btn:hover { transform:translateY(-2px); box-shadow:0 0 40px rgba(0,255,136,.6); }
.login-btn:disabled { opacity:.5; transform:none; cursor:not-allowed; }
.login-attempts { font-size:11px; color:rgba(255,255,255,.3); margin-top:16px; }

/* DASHBOARD */
#dashboard { position:relative; z-index:1; min-height:100vh; display:none; }

/* TOPBAR */
.topbar {
  position:sticky; top:0; z-index:100;
  background: rgba(5,10,6,.9); backdrop-filter:blur(20px);
  border-bottom:1px solid var(--border);
  padding:0 24px; height:64px;
  display:flex; align-items:center; justify-content:space-between;
}
.topbar-left { display:flex; align-items:center; gap:14px; }
.topbar-logo { width:36px; height:36px; border-radius:10px; object-fit:cover; box-shadow:0 0 15px rgba(0,255,136,.3); }
.topbar-title { font-family:var(--font-head); font-size:16px; color:var(--g); letter-spacing:1.5px;
  text-shadow:0 0 15px rgba(0,255,136,.4); }
.topbar-badge { font-size:10px; color:rgba(0,255,136,.5); letter-spacing:1px; }
.topbar-right { display:flex; align-items:center; gap:12px; }
.status-pill {
  display:flex; align-items:center; gap:7px; padding:6px 14px;
  background:rgba(0,255,136,.06); border:1px solid rgba(0,255,136,.15); border-radius:100px;
  font-size:11px; font-weight:700; letter-spacing:1px;
}
.status-dot { width:7px; height:7px; border-radius:50%; background:#ff3c3c; transition:all .3s; }
.status-dot.on { background:var(--g); box-shadow:0 0 8px var(--g); animation:dotPulse 2s infinite; }
@keyframes dotPulse { 0%,100%{box-shadow:0 0 6px var(--g)} 50%{box-shadow:0 0 16px var(--g)} }
.logout-btn {
  padding:6px 14px; border-radius:100px; border:1px solid rgba(255,60,60,.25);
  background:transparent; color:rgba(255,100,100,.7); font-size:11px; font-weight:700;
  cursor:pointer; transition:all .3s; letter-spacing:1px;
}
.logout-btn:hover { background:rgba(255,60,60,.1); border-color:rgba(255,60,60,.5); color:var(--r); }

/* CONTENT */
.content { max-width:1400px; margin:0 auto; padding:28px 24px; }

/* STATS ROW */
.stats-row { display:grid; grid-template-columns:repeat(4,1fr); gap:14px; margin-bottom:28px; }
@media(max-width:768px){.stats-row{grid-template-columns:repeat(2,1fr);}}
.stat-card {
  background:var(--card); border:1px solid var(--border); border-radius:18px; padding:20px 22px;
  transition:all .3s;
}
.stat-card:hover { border-color:rgba(0,255,136,.3); background:rgba(0,255,136,.06); }
.stat-icon { font-size:22px; margin-bottom:10px; }
.stat-val { font-family:var(--font-head); font-size:28px; color:var(--g); line-height:1;
  text-shadow:0 0 15px rgba(0,255,136,.3); }
.stat-lbl { font-size:11px; color:rgba(255,255,255,.35); letter-spacing:1px; margin-top:4px; }

/* MAIN GRID */
.main-grid { display:grid; grid-template-columns:1fr 380px; gap:20px; }
@media(max-width:1100px){.main-grid{grid-template-columns:1fr;}}

/* CARDS */
.card {
  background:var(--card); border:1px solid var(--border); border-radius:20px; padding:24px;
}
.card-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:20px; }
.card-title { font-family:var(--font-head); font-size:13px; color:var(--g); letter-spacing:1.5px; }
.card-sub { font-size:11px; color:rgba(255,255,255,.3); margin-top:3px; }

/* SECTION TABS */
.tabs { display:flex; gap:4px; background:rgba(0,0,0,.3); border-radius:12px; padding:4px; margin-bottom:20px; }
.tab-btn {
  flex:1; padding:9px; border:none; border-radius:9px; cursor:pointer;
  font-family:var(--font-body); font-size:12px; font-weight:700; letter-spacing:.5px;
  background:transparent; color:rgba(255,255,255,.4); transition:all .3s;
}
.tab-btn.active { background:rgba(0,255,136,.12); color:var(--g); border:1px solid rgba(0,255,136,.25); }
.tab-pane { display:none; }
.tab-pane.active { display:block; }

/* MAP LIST */
.map-item {
  display:flex; align-items:center; gap:14px; padding:14px 16px;
  background:rgba(0,0,0,.2); border:1px solid rgba(0,255,136,.08); border-radius:14px;
  margin-bottom:10px; transition:all .3s; animation:itemIn .3s ease;
}
@keyframes itemIn { from{opacity:0;transform:translateX(-8px)} to{opacity:1;transform:translateX(0)} }
.map-item:hover { border-color:rgba(0,255,136,.2); background:rgba(0,255,136,.04); }
.map-item.blocked { border-color:rgba(255,60,60,.2); background:rgba(255,60,60,.04); }
.map-avatar { width:38px; height:38px; border-radius:10px; background:rgba(0,255,136,.08);
  display:flex; align-items:center; justify-content:center; font-size:18px; flex-shrink:0; }
.map-info { flex:1; min-width:0; }
.map-name { font-weight:700; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.map-meta { font-size:11px; color:rgba(255,255,255,.35); margin-top:3px; font-family:var(--font-mono); }
.map-status { font-size:10px; font-weight:700; padding:3px 10px; border-radius:100px; letter-spacing:1px; }
.map-status.active { background:rgba(0,255,136,.12); color:var(--g); border:1px solid rgba(0,255,136,.25); }
.map-status.blocked { background:rgba(255,60,60,.12); color:var(--r); border:1px solid rgba(255,60,60,.25); }
.map-toggle {
  padding:7px 14px; border-radius:10px; border:none; cursor:pointer;
  font-size:11px; font-weight:700; letter-spacing:.5px; transition:all .3s;
}
.map-toggle.block-btn { background:rgba(255,60,60,.15); color:var(--r); border:1px solid rgba(255,60,60,.3); }
.map-toggle.block-btn:hover { background:rgba(255,60,60,.25); }
.map-toggle.unblock-btn { background:rgba(0,255,136,.1); color:var(--g); border:1px solid rgba(0,255,136,.25); }
.map-toggle.unblock-btn:hover { background:rgba(0,255,136,.2); }
.empty-state { text-align:center; padding:48px 24px; color:rgba(255,255,255,.25); }
.empty-icon { font-size:40px; margin-bottom:12px; opacity:.4; }

/* SETTINGS FORM */
.setting-group { margin-bottom:22px; }
.setting-label { font-size:11px; font-weight:700; color:rgba(0,255,136,.7); letter-spacing:1.5px; margin-bottom:8px; display:block; }
.setting-desc { font-size:11px; color:rgba(255,255,255,.3); margin-bottom:10px; line-height:1.5; }
.setting-input {
  width:100%; padding:12px 16px;
  background:rgba(0,0,0,.3); border:1px solid rgba(0,255,136,.15);
  border-radius:10px; color:#fff; font-family:var(--font-mono); font-size:13px;
  outline:none; transition:all .3s;
}
.setting-input:focus { border-color:rgba(0,255,136,.5); box-shadow:0 0 15px rgba(0,255,136,.1); }
.setting-input::placeholder { color:rgba(255,255,255,.2); }
textarea.setting-input { resize:vertical; min-height:80px; line-height:1.6; font-family:var(--font-body); font-size:13px; }
.setting-toggle-row { display:flex; align-items:center; justify-content:space-between; padding:12px 16px;
  background:rgba(0,0,0,.2); border:1px solid rgba(0,255,136,.1); border-radius:10px; margin-bottom:10px; }
.toggle-info { font-size:13px; font-weight:600; }
.toggle-sub { font-size:11px; color:rgba(255,255,255,.35); margin-top:2px; }
.toggle-sw { position:relative; width:44px; height:24px; flex-shrink:0; }
.toggle-sw input { opacity:0; width:0; height:0; }
.toggle-sw span {
  position:absolute; inset:0; border-radius:100px; cursor:pointer;
  background:rgba(255,255,255,.1); border:1px solid rgba(255,255,255,.1); transition:all .3s;
}
.toggle-sw span::before {
  content:''; position:absolute; width:18px; height:18px; border-radius:50%;
  background:#fff; top:2px; left:2px; transition:all .3s;
}
.toggle-sw input:checked + span { background:rgba(0,255,136,.3); border-color:var(--g); }
.toggle-sw input:checked + span::before { transform:translateX(20px); background:var(--g); box-shadow:0 0 8px var(--g); }

/* SAVE BTN */
.save-btn {
  width:100%; padding:13px; border:none; border-radius:12px; cursor:pointer;
  background:linear-gradient(135deg,var(--g),var(--g2));
  color:#050a06; font-family:var(--font-head); font-size:12px; font-weight:700; letter-spacing:2px;
  box-shadow:0 0 20px rgba(0,255,136,.3); transition:all .3s;
}
.save-btn:hover { transform:translateY(-1px); box-shadow:0 0 30px rgba(0,255,136,.5); }
.save-btn:disabled { opacity:.5; transform:none; cursor:not-allowed; }

/* LOG LIST */
.log-item {
  padding:12px 14px; background:rgba(0,0,0,.2); border:1px solid rgba(255,60,60,.1);
  border-radius:12px; margin-bottom:8px; animation:itemIn .3s ease;
}
.log-user { font-weight:700; font-size:13px; color:var(--r); }
.log-reason { font-size:12px; color:rgba(255,255,255,.5); margin-top:3px; }
.log-time { font-size:10px; color:rgba(255,255,255,.25); font-family:var(--font-mono); margin-top:4px; }
.log-map { font-size:11px; color:rgba(255,200,0,.6); margin-top:2px; }

/* SIDEBAR */
.sidebar { display:flex; flex-direction:column; gap:16px; }

/* GLOBAL SETTINGS CARD */
.info-row { display:flex; justify-content:space-between; align-items:center;
  padding:10px 0; border-bottom:1px solid rgba(0,255,136,.06); }
.info-row:last-child { border-bottom:none; }
.info-key { font-size:12px; color:rgba(255,255,255,.35); }
.info-val { font-size:12px; font-family:var(--font-mono); color:var(--g); }

/* TOAST */
.toast {
  position:fixed; bottom:28px; right:28px; z-index:9999;
  padding:14px 22px; border-radius:14px; font-weight:700; font-size:13px;
  animation:toastIn .3s ease; max-width:300px;
}
@keyframes toastIn { from{opacity:0;transform:translateX(30px)} to{opacity:1;transform:translateX(0)} }
.toast.success { background:rgba(0,255,136,.15); border:1px solid rgba(0,255,136,.4); color:var(--g); }
.toast.error { background:rgba(255,60,60,.15); border:1px solid rgba(255,60,60,.4); color:var(--r); }
.toast.info { background:rgba(100,150,255,.15); border:1px solid rgba(100,150,255,.4); color:#99bbff; }

/* MODAL */
.modal-overlay { position:fixed; inset:0; z-index:2000; background:rgba(0,0,0,.8);
  backdrop-filter:blur(8px); display:none; align-items:center; justify-content:center; padding:20px; }
.modal-overlay.open { display:flex; }
.modal-box {
  background:#0a1a0e; border:1px solid rgba(255,60,60,.3); border-radius:20px;
  padding:28px; max-width:420px; width:100%; animation:boxIn .3s ease;
  box-shadow:0 0 60px rgba(255,60,60,.1);
}
.modal-title { font-family:var(--font-head); font-size:16px; color:var(--r); margin-bottom:8px; }
.modal-body { font-size:13px; color:rgba(255,255,255,.6); line-height:1.6; margin-bottom:20px; }
.modal-preview { background:rgba(0,0,0,.3); border-radius:10px; padding:12px 14px;
  font-size:12px; font-family:var(--font-mono); color:rgba(255,255,255,.5);
  border:1px solid rgba(255,255,255,.06); margin-bottom:20px; max-height:120px; overflow-y:auto; }
.modal-btns { display:flex; gap:10px; }
.modal-cancel { flex:1; padding:11px; border-radius:10px; border:1px solid rgba(255,255,255,.15);
  background:transparent; color:rgba(255,255,255,.5); cursor:pointer; font-weight:700; transition:all .3s; }
.modal-cancel:hover { background:rgba(255,255,255,.05); color:#fff; }
.modal-confirm {
  flex:1; padding:11px; border-radius:10px; border:none; cursor:pointer;
  background:linear-gradient(135deg,var(--r),#cc0000); color:#fff;
  font-weight:700; transition:all .3s; box-shadow:0 0 20px rgba(255,60,60,.3);
}
.modal-confirm:hover { transform:translateY(-1px); box-shadow:0 0 30px rgba(255,60,60,.5); }

/* MISC */
.badge { display:inline-flex; align-items:center; gap:5px; padding:3px 10px; border-radius:100px;
  font-size:10px; font-weight:700; letter-spacing:.5px; }
.badge.green { background:rgba(0,255,136,.1); color:var(--g); border:1px solid rgba(0,255,136,.2); }
.badge.red { background:rgba(255,60,60,.1); color:var(--r); border:1px solid rgba(255,60,60,.2); }
.badge.yellow { background:rgba(255,200,0,.1); color:var(--y); border:1px solid rgba(255,200,0,.2); }

.search-input {
  width:100%; padding:10px 14px; background:rgba(0,0,0,.3);
  border:1px solid rgba(0,255,136,.12); border-radius:10px; color:#fff;
  font-size:13px; outline:none; transition:all .3s; margin-bottom:14px;
}
.search-input:focus { border-color:rgba(0,255,136,.4); }
.search-input::placeholder { color:rgba(255,255,255,.25); }

.refresh-btn {
  padding:7px 14px; border-radius:10px; border:1px solid rgba(0,255,136,.2);
  background:transparent; color:rgba(0,255,136,.7); cursor:pointer; font-size:12px;
  font-weight:700; transition:all .3s; letter-spacing:.5px;
}
.refresh-btn:hover { background:rgba(0,255,136,.08); color:var(--g); }

.divider { height:1px; background:rgba(0,255,136,.07); margin:20px 0; }

@media(max-width:600px){
  .topbar { padding:0 16px; }
  .topbar-title { font-size:13px; }
  .content { padding:16px; }
  .stats-row { grid-template-columns:repeat(2,1fr); gap:10px; }
}
</style>
</head>
<body>

<div class="grid-overlay"></div>
<div class="scanline"></div>

<!-- ===== LOGIN ===== -->
<div id="loginScreen">
  <div class="login-box">
    <img src="https://res.cloudinary.com/dsjctfzj1/image/upload/v1760351559/IMG-20251007-WA0626_dv8s8r.jpg" class="login-logo" alt="Logo">
    <div class="login-title">WARPAH AC</div>
    <div class="login-sub">ANTI-CHEAT CONTROL PANEL</div>
    <label class="login-label">PASSWORD ADMIN</label>
    <div class="login-pw-wrap">
      <input type="password" id="loginPw" class="login-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeydown="if(event.key==='Enter')doLogin()" oninput="updateLoginDots()">
      <button class="pw-eye" onclick="toggleLoginEye()" id="loginEye">
        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
      </button>
    </div>
    <div class="pw-dots" id="loginDots">
      <div class="pw-dot"></div><div class="pw-dot"></div><div class="pw-dot"></div>
      <div class="pw-dot"></div><div class="pw-dot"></div><div class="pw-dot"></div>
      <div class="pw-dot"></div><div class="pw-dot"></div>
    </div>
    <div class="login-err" id="loginErr"></div>
    <button class="login-btn" id="loginBtn" onclick="doLogin()">MASUK ‚Üí</button>
    <div class="login-attempts" id="loginAttempts"></div>
  </div>
</div>

<!-- ===== DASHBOARD ===== -->
<div id="dashboard">
  <div class="topbar">
    <div class="topbar-left">
      <img src="https://res.cloudinary.com/dsjctfzj1/image/upload/v1760351559/IMG-20251007-WA0626_dv8s8r.jpg" class="topbar-logo" alt="Logo">
      <div>
        <div class="topbar-title">WARPAH AC PANEL</div>
        <div class="topbar-badge">ANTI-CHEAT CONTROL SYSTEM</div>
      </div>
    </div>
    <div class="topbar-right">
      <div class="status-pill">
        <div class="status-dot" id="fbStatusDot"></div>
        <span id="fbStatusText" style="color:rgba(255,255,255,.5);font-size:11px;font-weight:700;letter-spacing:1px">CONNECTING</span>
      </div>
      <button class="logout-btn" onclick="doLogout()">LOGOUT</button>
    </div>
  </div>

  <div class="content">
    <!-- STATS -->
    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-icon">üó∫Ô∏è</div>
        <div class="stat-val" id="statMapsTotal">0</div>
        <div class="stat-lbl">TOTAL MAPS</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">‚úÖ</div>
        <div class="stat-val" id="statMapsActive">0</div>
        <div class="stat-lbl">MAP AKTIF</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üö´</div>
        <div class="stat-val" id="statMapsBlocked">0</div>
        <div class="stat-lbl">MAP DIBLOK</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">‚õî</div>
        <div class="stat-val" id="statCheaters">0</div>
        <div class="stat-lbl">CHEATER LOG</div>
      </div>
    </div>

    <div class="main-grid">
      <!-- LEFT: TABS (Maps + Logs) -->
      <div>
        <div class="tabs">
          <button class="tab-btn active" onclick="switchTab('maps',this)">üó∫Ô∏è MAP LIST</button>
          <button class="tab-btn" onclick="switchTab('logs',this)">‚õî CHEATER LOG</button>
        </div>

        <!-- MAP LIST TAB -->
        <div class="tab-pane active" id="tab-maps">
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title">REGISTERED MAPS</div>
                <div class="card-sub">Map yang dikirim oleh anti-cheat script</div>
              </div>
              <button class="refresh-btn" onclick="refreshMaps()">‚Üª REFRESH</button>
            </div>
            <input type="text" class="search-input" id="mapSearch" placeholder="Cari nama map atau Place ID..." oninput="filterMaps()">
            <div id="mapListContainer">
              <div class="empty-state"><div class="empty-icon">üî•</div><div>Menghubungkan ke Firebase...</div></div>
            </div>
          </div>
        </div>

        <!-- CHEATER LOG TAB -->
        <div class="tab-pane" id="tab-logs">
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title">CHEATER LOG</div>
                <div class="card-sub">Log cheater dari semua map</div>
              </div>
              <button class="refresh-btn" onclick="refreshLogs()">‚Üª REFRESH</button>
            </div>
            <div id="logListContainer">
              <div class="empty-state"><div class="empty-icon">üî•</div><div>Memuat log...</div></div>
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT: SIDEBAR -->
      <div class="sidebar">
        <!-- GLOBAL SETTINGS -->
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">‚öôÔ∏è GLOBAL SETTINGS</div>
              <div class="card-sub">Berlaku untuk semua map</div>
            </div>
            <span class="badge yellow" id="settingsSyncBadge">UNSAVED</span>
          </div>

          <div class="setting-group">
            <label class="setting-label">PESAN KICK (COPY MAP)</label>
            <div class="setting-desc">Pesan yang ditampilkan ke player yang ketahuan copy map</div>
            <textarea class="setting-input" id="setKickMsg" rows="4" placeholder="Masukkan pesan kick..."></textarea>
          </div>

          <div class="setting-group">
            <label class="setting-label">DURASI BAN (HARI)</label>
            <div class="setting-desc">Isi 0 untuk ban permanent</div>
            <input type="number" class="setting-input" id="setBanDays" min="0" max="365" placeholder="30">
          </div>

          <div class="setting-group">
            <label class="setting-label">WEBHOOK DISCORD (CHEATER)</label>
            <input class="setting-input" id="setWebhookCheater" placeholder="https://discord.com/api/webhooks/...">
          </div>

          <div class="setting-group">
            <label class="setting-label">WEBHOOK DISCORD (MAP INFO)</label>
            <input class="setting-input" id="setWebhookMap" placeholder="https://discord.com/api/webhooks/...">
          </div>

          <div class="divider"></div>

          <div class="setting-group">
            <label class="setting-label">TOGGLE FITUR</label>
            <div class="setting-toggle-row">
              <div>
                <div class="toggle-info">Anti Copy Map</div>
                <div class="toggle-sub">Deteksi & kick player yang copy map</div>
              </div>
              <label class="toggle-sw"><input type="checkbox" id="togAntiCopy" checked><span></span></label>
            </div>
            <div class="setting-toggle-row">
              <div>
                <div class="toggle-info">Auto Ban</div>
                <div class="toggle-sub">Ban otomatis setelah terdeteksi</div>
              </div>
              <label class="toggle-sw"><input type="checkbox" id="togAutoBan" checked><span></span></label>
            </div>
            <div class="setting-toggle-row">
              <div>
                <div class="toggle-info">Webhook Notif</div>
                <div class="toggle-sub">Kirim notif ke Discord</div>
              </div>
              <label class="toggle-sw"><input type="checkbox" id="togWebhook" checked><span></span></label>
            </div>
          </div>

          <button class="save-btn" id="saveSettingsBtn" onclick="saveSettings()">üíæ SIMPAN SETTINGS</button>
        </div>

        <!-- FIREBASE INFO -->
        <div class="card">
          <div class="card-header">
            <div class="card-title">üî• FIREBASE INFO</div>
          </div>
          <div class="info-row">
            <span class="info-key">Status</span>
            <span class="info-val" id="infoFbStatus">‚Äî</span>
          </div>
          <div class="info-row">
            <span class="info-key">Maps di DB</span>
            <span class="info-val" id="infoMapsCount">‚Äî</span>
          </div>
          <div class="info-row">
            <span class="info-key">Last Update</span>
            <span class="info-val" id="infoLastUpdate">‚Äî</span>
          </div>
          <div class="info-row">
            <span class="info-key">Blocked Maps</span>
            <span class="info-val" id="infoBlocked">‚Äî</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- BLOCK CONFIRM MODAL -->
<div class="modal-overlay" id="blockModal">
  <div class="modal-box">
    <div class="modal-title" id="modalTitle">üö´ BLOKIR MAP?</div>
    <div class="modal-body" id="modalBody">Semua player di server ini akan di-kick secara otomatis oleh script anti-cheat.</div>
    <div class="modal-preview" id="modalPreview"></div>
    <div class="modal-btns">
      <button class="modal-cancel" onclick="closeModal()">Batal</button>
      <button class="modal-confirm" id="modalConfirmBtn" onclick="confirmBlockAction()">Blokir</button>
    </div>
  </div>
</div>

<!-- Firebase SDK -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, onValue, set, update, remove, get, push } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

// ============================================================
// ‚ö†Ô∏è GANTI FIREBASE CONFIG DI SINI
// ============================================================
const firebaseConfig = {
  apiKey: "AIzaSyAl_c4-3_Y42iO8mKqS0QHIywxGAtNTSG8",
  authDomain: "warpahmonitoranticheat.firebaseapp.com",
  databaseURL: "https://warpahmonitoranticheat-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "warpahmonitoranticheat",
  storageBucket: "warpahmonitoranticheat.firebasestorage.app",
  messagingSenderId: "1021757972108",
  appId: "1:1021757972108:web:4735c04362ba4ae731a5a9"
};
// ============================================================

// ============================================================
// ‚ö†Ô∏è GANTI PASSWORD DASHBOARD DI SINI
// ============================================================
const DASHBOARD_PASSWORD = "WarpahExploits2026";
// ============================================================

const MAX_LOGIN_ATTEMPTS = 5;
const LOCK_DURATION = 60; // detik

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// Refs
const mapsRef    = ref(db, 'ac_maps');
const settingsRef = ref(db, 'ac_settings');
const logsRef    = ref(db, 'ac_cheater_logs');
const connRef    = ref(db, '.info/connected');

// State
let mapsData    = {};
let logsData    = {};
let settingsData = {};
let pendingAction = null;
let loginAttempts = 0;
let lockTimer = null;
let isLocked = false;
let filterText = '';

// ============================================================
// LOGIN
// ============================================================
window.updateLoginDots = function() {
  const val = document.getElementById('loginPw').value;
  document.querySelectorAll('#loginDots .pw-dot').forEach((d,i) => d.classList.toggle('on', i < val.length));
};

window.toggleLoginEye = function() {
  const inp = document.getElementById('loginPw');
  const btn = document.getElementById('loginEye');
  if (inp.type === 'password') {
    inp.type = 'text';
    btn.innerHTML = `<svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/></svg>`;
  } else {
    inp.type = 'password';
    btn.innerHTML = `<svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>`;
  }
};

window.doLogin = function() {
  if (isLocked) return;
  const pw = document.getElementById('loginPw').value;
  const err = document.getElementById('loginErr');
  if (pw === DASHBOARD_PASSWORD) {
    loginAttempts = 0;
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('dashboard').style.display = 'block';
    initDashboard();
  } else {
    loginAttempts++;
    document.getElementById('loginPw').value = '';
    updateLoginDots();
    const rem = MAX_LOGIN_ATTEMPTS - loginAttempts;
    if (loginAttempts >= MAX_LOGIN_ATTEMPTS) {
      isLocked = true;
      document.getElementById('loginBtn').disabled = true;
      document.getElementById('loginPw').disabled = true;
      err.textContent = 'üîí Terlalu banyak percobaan! Tunggu ' + LOCK_DURATION + ' detik.';
      let cd = LOCK_DURATION;
      lockTimer = setInterval(() => {
        cd--;
        document.getElementById('loginAttempts').textContent = 'üîí Unlock dalam ' + cd + ' detik...';
        if (cd <= 0) {
          clearInterval(lockTimer);
          isLocked = false; loginAttempts = 0;
          document.getElementById('loginBtn').disabled = false;
          document.getElementById('loginPw').disabled = false;
          err.textContent = ''; 
          document.getElementById('loginAttempts').textContent = '';
        }
      }, 1000);
    } else {
      err.textContent = '‚ùå Password salah! Sisa ' + rem + ' percobaan.';
      // shake
      const box = document.querySelector('.login-box');
      box.style.animation = 'none'; void box.offsetWidth;
      box.style.animation = 'shake .4s ease';
    }
  }
};

window.doLogout = function() {
  document.getElementById('dashboard').style.display = 'none';
  document.getElementById('loginScreen').style.display = 'flex';
  document.getElementById('loginPw').value = '';
  updateLoginDots();
};

// ============================================================
// INIT DASHBOARD
// ============================================================
function initDashboard() {
  // Firebase connection
  onValue(connRef, snap => {
    const on = snap.val();
    document.getElementById('fbStatusDot').classList.toggle('on', on);
    document.getElementById('fbStatusText').textContent = on ? 'FIREBASE ON' : 'RECONNECTING';
    document.getElementById('fbStatusText').style.color = on ? 'var(--g)' : 'rgba(255,255,255,.5)';
    document.getElementById('infoFbStatus').textContent = on ? 'üü¢ Connected' : 'üî¥ Offline';
  });

  // Maps listener
  onValue(mapsRef, snap => {
    mapsData = {};
    if (snap.exists()) snap.forEach(c => { mapsData[c.key] = { fbKey: c.key, ...c.val() }; });
    renderMaps();
    updateStats();
    document.getElementById('infoMapsCount').textContent = Object.keys(mapsData).length;
    document.getElementById('infoLastUpdate').textContent = new Date().toLocaleTimeString('id-ID');
  });

  // Settings listener
  onValue(settingsRef, snap => {
    if (snap.exists()) {
      settingsData = snap.val();
      applySettingsToForm();
    }
  });

  // Logs listener
  onValue(logsRef, snap => {
    logsData = {};
    if (snap.exists()) snap.forEach(c => { logsData[c.key] = { fbKey: c.key, ...c.val() }; });
    renderLogs();
    document.getElementById('statCheaters').textContent = Object.keys(logsData).length;
  });
}

// ============================================================
// RENDER MAPS
// ============================================================
function renderMaps() {
  const container = document.getElementById('mapListContainer');
  const entries = Object.values(mapsData);
  const filtered = filterText
    ? entries.filter(m => m.name?.toLowerCase().includes(filterText) || String(m.placeId).includes(filterText))
    : entries;

  // sort: blocked last, then newest first
  filtered.sort((a, b) => {
    if (a.blocked === b.blocked) return (b.addedAt || 0) - (a.addedAt || 0);
    return a.blocked ? 1 : -1;
  });

  if (filtered.length === 0) {
    container.innerHTML = `<div class="empty-state"><div class="empty-icon">üó∫Ô∏è</div><div>${filterText ? 'Tidak ada hasil pencarian' : 'Belum ada map terdaftar'}</div></div>`;
    return;
  }

  container.innerHTML = filtered.map(map => {
    const isBlocked = !!map.blocked;
    return `
    <div class="map-item ${isBlocked ? 'blocked' : ''}" id="mapItem_${map.fbKey}">
      <div class="map-avatar">${isBlocked ? 'üö´' : 'üó∫Ô∏è'}</div>
      <div class="map-info">
        <div class="map-name">${esc(map.name || 'Unknown Map')}</div>
        <div class="map-meta">Place ID: ${esc(String(map.placeId || '‚Äî'))} ¬∑ ${map.addedAt ? new Date(map.addedAt).toLocaleDateString('id-ID') : '‚Äî'}</div>
      </div>
      <div class="map-status ${isBlocked ? 'blocked' : 'active'}">${isBlocked ? 'BLOCKED' : 'ACTIVE'}</div>
      <button class="map-toggle ${isBlocked ? 'unblock-btn' : 'block-btn'}"
        onclick="window.openBlockModal('${map.fbKey}', ${isBlocked})">
        ${isBlocked ? '‚úÖ Unblock' : 'üö´ Block'}
      </button>
    </div>`;
  }).join('');
}

window.filterMaps = function() {
  filterText = document.getElementById('mapSearch').value.toLowerCase();
  renderMaps();
};
window.refreshMaps = function() { renderMaps(); showToast('Map list diperbarui', 'info'); };

// ============================================================
// RENDER LOGS
// ============================================================
function renderLogs() {
  const container = document.getElementById('logListContainer');
  const entries = Object.values(logsData).sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));
  if (entries.length === 0) {
    container.innerHTML = `<div class="empty-state"><div class="empty-icon">‚úÖ</div><div>Belum ada log cheater</div></div>`;
    return;
  }
  container.innerHTML = entries.slice(0, 50).map(log => `
    <div class="log-item">
      <div class="log-user">‚õî ${esc(log.username || log.userId || '?')}</div>
      <div class="log-reason">Alasan: ${esc(log.reason || 'Copy Map')}</div>
      <div class="log-map">üó∫Ô∏è ${esc(log.gameName || '‚Äî')} ¬∑ Place ID: ${esc(String(log.placeId || '‚Äî'))}</div>
      <div class="log-time">${log.timestamp ? new Date(log.timestamp).toLocaleString('id-ID') : '‚Äî'}</div>
    </div>
  `).join('');
}
window.refreshLogs = function() { renderLogs(); showToast('Log diperbarui', 'info'); };

// ============================================================
// BLOCK / UNBLOCK
// ============================================================
window.openBlockModal = function(fbKey, isBlocked) {
  const map = mapsData[fbKey];
  if (!map) return;
  pendingAction = { fbKey, isBlocked };
  const title = document.getElementById('modalTitle');
  const body  = document.getElementById('modalBody');
  const prev  = document.getElementById('modalPreview');
  const btn   = document.getElementById('modalConfirmBtn');

  if (isBlocked) {
    title.textContent = '‚úÖ UNBLOCK MAP?';
    body.textContent = 'Map ini akan diaktifkan kembali. Script anti-cheat tidak akan kick player di map ini.';
    btn.textContent = 'Unblock';
    btn.style.background = 'linear-gradient(135deg, var(--g), var(--g2))';
    btn.style.color = '#050a06';
  } else {
    title.textContent = 'üö´ BLOKIR MAP?';
    body.textContent = 'Semua player di server map ini akan di-kick otomatis oleh script anti-cheat dalam beberapa detik.';
    btn.textContent = 'Blokir';
    btn.style.background = 'linear-gradient(135deg, var(--r), #cc0000)';
    btn.style.color = '#fff';
  }
  prev.textContent = `Map: ${map.name || '?'}\nPlace ID: ${map.placeId || '?'}\nStatus saat ini: ${isBlocked ? 'BLOCKED ‚Üí ACTIVE' : 'ACTIVE ‚Üí BLOCKED'}`;
  document.getElementById('blockModal').classList.add('open');
};

window.closeModal = function() {
  document.getElementById('blockModal').classList.remove('open');
  pendingAction = null;
};

window.confirmBlockAction = async function() {
  if (!pendingAction) return;
  const { fbKey, isBlocked } = pendingAction;
  closeModal();
  try {
    await update(ref(db, 'ac_maps/' + fbKey), { blocked: !isBlocked, blockedAt: isBlocked ? null : Date.now() });
    showToast(isBlocked ? '‚úÖ Map berhasil di-unblock!' : 'üö´ Map berhasil diblokir! Script akan kick player.', isBlocked ? 'success' : 'error');
    document.getElementById('infoBlocked').textContent = Object.values(mapsData).filter(m => m.blocked).length;
  } catch(e) {
    showToast('‚ùå Gagal update status map', 'error');
  }
};

// ============================================================
// SETTINGS
// ============================================================
function applySettingsToForm() {
  if (settingsData.kickMsg !== undefined) document.getElementById('setKickMsg').value = settingsData.kickMsg;
  if (settingsData.banDays !== undefined) document.getElementById('setBanDays').value = settingsData.banDays;
  if (settingsData.webhookCheater !== undefined) document.getElementById('setWebhookCheater').value = settingsData.webhookCheater;
  if (settingsData.webhookMap !== undefined) document.getElementById('setWebhookMap').value = settingsData.webhookMap;
  if (settingsData.antiCopyEnabled !== undefined) document.getElementById('togAntiCopy').checked = settingsData.antiCopyEnabled;
  if (settingsData.autoBanEnabled !== undefined) document.getElementById('togAutoBan').checked = settingsData.autoBanEnabled;
  if (settingsData.webhookEnabled !== undefined) document.getElementById('togWebhook').checked = settingsData.webhookEnabled;
  document.getElementById('settingsSyncBadge').textContent = 'SYNCED';
  document.getElementById('settingsSyncBadge').className = 'badge green';
}

window.saveSettings = async function() {
  const btn = document.getElementById('saveSettingsBtn');
  btn.disabled = true; btn.textContent = '‚è≥ Menyimpan...';
  const data = {
    kickMsg: document.getElementById('setKickMsg').value,
    banDays: parseInt(document.getElementById('setBanDays').value) || 0,
    webhookCheater: document.getElementById('setWebhookCheater').value,
    webhookMap: document.getElementById('setWebhookMap').value,
    antiCopyEnabled: document.getElementById('togAntiCopy').checked,
    autoBanEnabled: document.getElementById('togAutoBan').checked,
    webhookEnabled: document.getElementById('togWebhook').checked,
    updatedAt: Date.now()
  };
  try {
    await set(settingsRef, data);
    showToast('‚úÖ Settings berhasil disimpan & sync ke semua server!', 'success');
    document.getElementById('settingsSyncBadge').textContent = 'SYNCED';
    document.getElementById('settingsSyncBadge').className = 'badge green';
  } catch(e) {
    showToast('‚ùå Gagal menyimpan settings', 'error');
  }
  btn.disabled = false; btn.textContent = 'üíæ SIMPAN SETTINGS';
};

// Mark unsaved on input
['setKickMsg','setBanDays','setWebhookCheater','setWebhookMap','togAntiCopy','togAutoBan','togWebhook'].forEach(id => {
  const el = document.getElementById(id);
  if (el) el.addEventListener('input', () => {
    document.getElementById('settingsSyncBadge').textContent = 'UNSAVED';
    document.getElementById('settingsSyncBadge').className = 'badge yellow';
  });
});

// ============================================================
// STATS
// ============================================================
function updateStats() {
  const entries = Object.values(mapsData);
  const blocked = entries.filter(m => m.blocked).length;
  document.getElementById('statMapsTotal').textContent = entries.length;
  document.getElementById('statMapsActive').textContent = entries.length - blocked;
  document.getElementById('statMapsBlocked').textContent = blocked;
  document.getElementById('infoBlocked').textContent = blocked;
}

// ============================================================
// TABS
// ============================================================
window.switchTab = function(name, btn) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById('tab-' + name).classList.add('active');
};

// ============================================================
// TOAST
// ============================================================
window.showToast = function(msg, type='info') {
  document.querySelectorAll('.toast').forEach(t => t.remove());
  const t = document.createElement('div');
  t.className = 'toast ' + type; t.textContent = msg;
  document.body.appendChild(t);
  setTimeout(() => { t.style.transition='opacity .3s'; t.style.opacity='0'; setTimeout(()=>t.remove(), 300); }, 3500);
};

// ESCAPE
function esc(s) { const d = document.createElement('div'); d.textContent = String(s||''); return d.innerHTML; }

// Shake animation
const style = document.createElement('style');
style.textContent = '@keyframes shake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-8px)}40%,80%{transform:translateX(8px)}}';
document.head.appendChild(style);

// Dismiss modal on overlay click
document.getElementById('blockModal').addEventListener('click', e => { if(e.target===document.getElementById('blockModal')) closeModal(); });

// Default settings text
setTimeout(() => {
  if (!document.getElementById('setKickMsg').value) {
    document.getElementById('setKickMsg').value =
`\n‚õî ANTI CHEAT COPY MAP\n\nAkun ini terkena BAN!\nAlasan: Copy Map\nDurasi: [DURASI] HARI\n\nüõ°Ô∏è Anti Cheat Copy Map by Warpah`;
  }
  if (!document.getElementById('setBanDays').value) document.getElementById('setBanDays').value = '30';
}, 500);

</script>
</body>
</html>
